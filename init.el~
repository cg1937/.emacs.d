(require 'package)
(add-to-list 'package-archives '("melpa" . "https://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/"))
(package-initialize)

;; disable menu bar and tool bar
(menu-bar-mode -1)
(tool-bar-mode -1)


(server-start)
(require 'org-protocol)
(require 'org-roam-protocol)

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(custom-enabled-themes (quote (dracula)))
 '(custom-safe-themes
   (quote
    ("d0fe9efeaf9bbb6f42ce08cd55be3f63d4dfcb87601a55e36c3421f2b5dc70f3" default)))
 '(org-roam-directory "~/OSCD/Info-System/Note/")
 '(org-roam-graph-viewer "~/Downloads/basilisk/basilisk")
 '(package-selected-packages
   (quote
    (counsel magit company org-roam posframe all-the-icons pyim cnfonts dracula-theme))))

(prefer-coding-system 'utf-8)
(set-default-coding-systems 'utf-8)
(set-terminal-coding-system 'utf-8)
(set-keyboard-coding-system 'utf-8)

;; org-mode setting
;; enable auto newline
(add-hook 'org-mode-hook (lambda () (setq truncate-lines nil)))

;; input method pyim setting
(require 'pyim)
(require 'pyim-basedict)
(pyim-basedict-enable)
(setq default-input-method "pyim")
(setq pyim-default-scheme 'xiaohe-shuangpin)

(add-to-list 'load-path (expand-file-name "~/.emacs.d/lisp"))

;; eshell(aweshell) setting
(require 'aweshell)
;;(setq load-path (cons "~/.emacs.d/lisp" load-path))
;;(require 'init-eshell)

;; awesome-tab setting
(require 'awesome-tab)
(awesome-tab-mode t)
(setq awesome-tab-label-fixed-length 13)
(setq awesome-tab-height 120)

;(require 'cnfonts)
;(cnfonts-enable)

(set-default-font "Sarasa Term SC-11")
;; Auto generated by cnfonts



(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )

;; company-mode setting
(add-hook 'after-init-hook 'global-company-mode)

;; org-roam setting
(use-package org-roam
      :hook
      (after-init . org-roam-mode)
      :custom
      (org-roam-directory "~/OSCD/Info-System/Note/")
      (org-roam-graph-viewer "~/Downloads/basilisk/basilisk")
      :bind (:map org-roam-mode-map
              (("C-c n l" . org-roam)
               ("C-c n f" . org-roam-find-file)
               ("C-c n g" . org-roam-graph))
              :map org-mode-map
              (("C-c n i" . org-roam-insert))))
;; magit setting

(global-set-key (kbd "C-x g") 'magit-status)
(global-set-key (kbd "C-x M-g") 'magit-dispatch-popup)

;; customize function for open init.el
;;key for initialize file

(defun open-my-init-file()
  (interactive)
  (find-file "~/.emacs.d/init.el"))
(global-set-key(kbd "<f5>") 'open-my-init-file)

(defun load-my-init-file()
  (interactive)
  (load "~/.emacs.d/init.el"))
(global-set-key(kbd "<f7>") 'load-my-init-file)

;; avy setting
;; Jump to arbitrary positions
(use-package avy
  :ensure t
  ;; integrate with isearch and others
  ;; C-' to select isearch-candidate with avy
  :hook (after-init . avy-setup-default)
  :custom
  (avy-timeout-seconds 0.2)
  (avy-all-windows nil)
  (avy-background t)
  (avy-keys '(?a ?s ?d ?f ?g ?h ?j ?k ?l ?q ?w ?e ?r ?u ?i ?o ?p)))

;; ivy setting
(use-package ivy :ensure t
  :diminish (ivy-mode . "")
  :config
  (ivy-mode 1)
  ;; add ‘recentf-mode’ and bookmarks to ‘ivy-switch-buffer’.
  (setq ivy-use-virtual-buffers t)
  ;; number of result lines to display
  (setq ivy-height 10)
  ;; does not count candidates
  (setq ivy-count-format "%d/%d ")
  ;; no regexp by default
  (setq ivy-fixed-height-minibuffer t)
  ;; fixed height
  (setq ivy-re-builders-alist
	  ;; allow input not in order
        '((t   . ivy--regex-ignore-order))))

